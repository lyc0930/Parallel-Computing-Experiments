# <center>实验 2</center>

##### <p align="right">PB17000297 罗晏宸</br>2020.8.6</p>

### 实验题目

利用 MPI 进行蒙特卡洛模拟

在道路交通规划上，需要对单条道路的拥堵情况进行估计。因为仅考虑单条车道，所以不存在超车。假设共有 $n$ 辆车，分别编号 $0, 1, \cdots, n-1$ ，每辆车占据一个单位的空间。初始状态如下，$n$ 辆车首尾相连，速度都是  $0$ 。每个时间周期里每个车辆的运动满足以下规则：
1. 假设当前周期开始时，速度是 $v$ 。
2. 和前一辆车的距离为 $d$（前一辆车车尾到这辆车车头的距离，对于第 $0$ 号车，$d = \infty$），若 $d > v$，它的速度会提高到 $v + 1$ 。最高限速 $v_max$。若 $d \leqslant v$ ，那么它的速度会降低到 $d$。
3. 前两条完成后，司机还会以概率 $p$ 随机减速 $1$ 个单位。速度不会为负值。
4. 基于以上几点，车辆向前移动 $v$（这里的 $v$ 已经被更新）个单位

### 实验环境

#### 操作系统

Windows Subsystem for Linux: Ubuntu 18.04 LTS （内核版本 4.4.0-18362-Microsoft）

#### 编译环境

- g++ 7.5.0

- OpenMP 4.5.0

- MPICH 3.3a2

#### 硬件配置

​	Intel&reg;  Core&trade;  i5-7200U CPU

- 内核数：2
- 线程数：4（超线程）

### 算法设计与分析

### 核心代码

### 实验结果

-  道路情况
每次程序运行都会在`traffic_condition`文件夹下输出文件名形如`NxC.data`的数据文件，其中`N`表示车辆数量，`C`表示周期数，文件中的数据条目以`Car i : Position , Velocity `的形式记录每辆车的位置与车速。

-  运行时间(s)

| 规模（车辆数量 $\times$ 周期）\进程数 | 1           | 2           | 4           |
| :---------- | ----------- | ----------- | ----------- |
| 100000 $\times$ 2000        | 3.92441  | 2.82178  | 1.58254 |
| 500000 $\times$ 500       | 3.96222 | 2.73523 | 1.86402 |
| 1000000 $\times$ 300      | 5.35513  | 3.65961  | 2.31082  |

- 加速比

| 规模（车辆数量 $\times$ 周期）\进程数 | 1           | 2           | 4           |
| :---------- | ----------- | ----------- | ----------- |
| 100000 $\times$ 2000        | 1  | 1.39076  | 2.47982 |
| 500000 $\times$ 500       | 1 | 1.44859 | 2.12563 |
| 1000000 $\times$ 300      | 1  | 1.46331  | 2.31742 |
